<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Java TSP</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        
        .code-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            margin: 20px 0;
        }
        
        h1 {
            color: #333;
            text-align: center;
        }
        
        .code-title {
            background-color: #2d3748;
            color: white;
            padding: 10px 20px;
            margin: 0 0 10px 0;
            border-radius: 5px;
            font-weight: bold;
            font-size: 16px;
        }
        
        .copy-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 8px 16px;
            font-size: 14px;
            cursor: pointer;
            border-radius: 4px;
            margin: 0 0 10px 0;
            transition: background-color 0.3s;
        }
        
        .copy-button:hover {
            background-color: #45a049;
        }
        
        .copy-button.copied {
            background-color: #2196F3;
        }
        
        /* Plain text code styling - no syntax highlighting */
        .plain-code {
            font-family: 'Courier New', Consolas, Monaco, monospace;
            background-color: #f8f8f8;
            border: 1px solid #e1e1e1;
            border-radius: 5px;
            padding: 20px;
            margin: 0;
            overflow-x: auto;
            white-space: pre;
            font-size: 14px;
            line-height: 1.5;
            color: #333;
        }
    </style>
</head>
<body>
    <h1>Java TSP</h1>
    
    <div class="code-container">
        <div class="code-title">Java Code</div>
        <button class="copy-button" onclick="copyCode()">ðŸ“‹ Copy Code</button>
        <pre class="plain-code" id="java-code">import java.util.*;

public class TravelingSalesman {
    private static int n; // number of cities
    private static int[][] dist; // distance matrix
    private static Scanner sc = new Scanner(System.in);
    
    public static void main(String[] args) {
        System.out.println("=== Traveling Salesman Problem Solver ===\n");
        
        // Get number of cities
        n = getNumberOfCities();
        
        // Initialize distance matrix
        dist = new int[n][n];
        
        // Get distance matrix from user
        getDistanceMatrix();
        
        // Get starting city
        int startCity = getStartingCity();
        
        // Solve TSP
        solveTSP(startCity);
    }
    
    private static int getNumberOfCities() {
        int cities;
        while (true) {
            try {
                System.out.print("Enter the number of cities: ");
                String input = sc.nextLine().trim();
                
                if (input.isEmpty()) {
                    System.out.println("Error: Please enter a valid number!");
                    continue;
                }
                
                cities = Integer.parseInt(input);
                
                if (cities &lt;= 0) {
                    System.out.println("Error: Number of cities must be positive!");
                    continue;
                }
                
                if (cities &lt; 2) {
                    System.out.println("Error: Need at least 2 cities for TSP!");
                    continue;
                }
                
                break;
            } catch (NumberFormatException e) {
                System.out.println("Error: Please enter a valid integer (no characters allowed)!");
            }
        }
        return cities;
    }
    
    private static void getDistanceMatrix() {
        System.out.println("\n*** IMPORTANT: Enter diagonal values as 0 (distance from a city to itself) ***");
        System.out.println("Enter the distance matrix (city to city distances):");
        System.out.println("Cities are numbered from 0 to " + (n-1));
        
        for (int i = 0; i &lt; n; i++) {
            for (int j = 0; j &lt; n; j++) {
                while (true) {
                    try {
                        System.out.print("Distance from city " + i + " to city " + j + ": ");
                        String input = sc.nextLine().trim();
                        
                        if (input.isEmpty()) {
                            System.out.println("Error: Please enter a valid distance!");
                            continue;
                        }
                        
                        int distance = Integer.parseInt(input);
                        
                        if (distance &lt; 0) {
                            System.out.println("Error: Distance cannot be negative!");
                            continue;
                        }
                        
                        // Check diagonal values
                        if (i == j &amp;&amp; distance != 0) {
                            System.out.println("Warning: Diagonal value should be 0 (distance from city to itself)");
                            System.out.println("Setting distance from city " + i + " to city " + j + " as 0");
                            distance = 0;
                        }
                        
                        dist[i][j] = distance;
                        break;
                        
                    } catch (NumberFormatException e) {
                        System.out.println("Error: Please enter a valid integer (no characters allowed)!");
                    }
                }
            }
        }
        
        // Display the entered matrix
        System.out.println("\nDistance Matrix:");
        System.out.print("     ");
        for (int j = 0; j &lt; n; j++) {
            System.out.printf("%4d ", j);
        }
        System.out.println();
        
        for (int i = 0; i &lt; n; i++) {
            System.out.printf("%2d : ", i);
            for (int j = 0; j &lt; n; j++) {
                System.out.printf("%4d ", dist[i][j]);
            }
            System.out.println();
        }
    }
    
    private static int getStartingCity() {
        int startCity;
        while (true) {
            try {
                System.out.print("\nEnter the starting city (0 to " + (n-1) + "): ");
                String input = sc.nextLine().trim();
                
                if (input.isEmpty()) {
                    System.out.println("Error: Please enter a valid city number!");
                    continue;
                }
                
                startCity = Integer.parseInt(input);
                
                if (startCity &lt; 0 || startCity &gt;= n) {
                    System.out.println("Error: Starting city must be between 0 and " + (n-1) + "!");
                    continue;
                }
                
                break;
            } catch (NumberFormatException e) {
                System.out.println("Error: Please enter a valid integer (no characters allowed)!");
            }
        }
        return startCity;
    }
    
    private static void solveTSP(int startCity) {
        System.out.println("\n=== Solving TSP ===");
        System.out.println("Starting from city: " + startCity);
        
        // Create list of cities to visit (excluding start city)
        List&lt;Integer&gt; cities = new ArrayList&lt;&gt;();
        for (int i = 0; i &lt; n; i++) {
            if (i != startCity) {
                cities.add(i);
            }
        }
        
        int minCost = Integer.MAX_VALUE;
        List&lt;Integer&gt; bestPath = new ArrayList&lt;&gt;();
        
        // Generate all permutations
        List&lt;List&lt;Integer&gt;&gt; permutations = generatePermutations(cities);
        
        System.out.println("\nAnalyzing all possible routes...");
        
        for (List&lt;Integer&gt; perm : permutations) {
            // Calculate cost of this path
            int cost = 0;
            int currentCity = startCity;
            List&lt;Integer&gt; currentPath = new ArrayList&lt;&gt;();
            currentPath.add(startCity);
            
            // Visit all cities in this permutation
            for (int city : perm) {
                cost += dist[currentCity][city];
                currentPath.add(city);
                currentCity = city;
            }
            
            // Return to start city
            cost += dist[currentCity][startCity];
            currentPath.add(startCity);
            
            // Check if this is the best path so far
            if (cost &lt; minCost) {
                minCost = cost;
                bestPath = new ArrayList&lt;&gt;(currentPath);
            }
        }
        
        // Display results
        System.out.println("\n=== SOLUTION ===");
        System.out.println("Optimal path: " + bestPath);
        System.out.println("Minimum cost: " + minCost);
        
        // Display step-by-step path
        System.out.println("\nStep-by-step journey:");
        for (int i = 0; i &lt; bestPath.size() - 1; i++) {
            int from = bestPath.get(i);
            int to = bestPath.get(i + 1);
            System.out.println("City " + from + " -&gt; City " + to + " (distance: " + dist[from][to] + ")");
        }
    }
    
    private static List&lt;List&lt;Integer&gt;&gt; generatePermutations(List&lt;Integer&gt; cities) {
        List&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;&gt;();
        generatePermutationsHelper(cities, 0, result);
        return result;
    }
    
    private static void generatePermutationsHelper(List&lt;Integer&gt; cities, int start, List&lt;List&lt;Integer&gt;&gt; result) {
        if (start &gt;= cities.size()) {
            result.add(new ArrayList&lt;&gt;(cities));
            return;
        }
        
        for (int i = start; i &lt; cities.size(); i++) {
            Collections.swap(cities, start, i);
            generatePermutationsHelper(cities, start + 1, result);
            Collections.swap(cities, start, i); // backtrack
        }
    }
}
</pre>
    </div>
    
    <script>
        function copyCode() {
            const codeElement = document.getElementById('java-code');
            const button = document.querySelector('.copy-button');
            
            // Get the plain text content without HTML formatting
            const codeText = codeElement.textContent || codeElement.innerText;
            
            // Create a temporary textarea to copy the text
            const textarea = document.createElement('textarea');
            textarea.value = codeText;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
            
            // Update button to show success
            const originalText = button.innerHTML;
            button.innerHTML = 'âœ… Copied!';
            button.classList.add('copied');
            
            // Reset button after 2 seconds
            setTimeout(() => {
                button.innerHTML = originalText;
                button.classList.remove('copied');
            }, 2000);
        }
        
        // Alternative modern approach for copying (fallback)
        async function copyCodeModern() {
            const codeElement = document.getElementById('java-code');
            const codeText = codeElement.textContent || codeElement.innerText;
            
            try {
                await navigator.clipboard.writeText(codeText);
                console.log('Code copied successfully');
            } catch (err) {
                console.log('Fallback to old copy method');
                copyCode();
            }
        }
    </script>
</body>
</html>